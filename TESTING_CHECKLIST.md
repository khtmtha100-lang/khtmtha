# ุฎุทุฉ ุงูุงุฎุชุจุงุฑ ุงูุดุงููุฉ ๐งช

## โ ุงููุฑุญูุฉ 1: ุงุฎุชุจุงุฑ Google Auth ูุน ุงููุณุชุฎุฏู ุงูุฌุฏูุฏ

### ุงูุฎุทูุงุช:
1. ุงูุชุญ ุงูุชุทุจูู
2. ุงุถุบุท ุนูู ุฒุฑ "ุฏุฎูู ุจู Google"
3. ุชุณุฌูู ุจู Gmail ุฌุฏูุฏ
4. โ ุชุญูู ูู: ูุธูุฑ ูููุฐุฌ ุฅุฏุฎุงู ุงูุจูุงูุงุช (ุงูุงุณูุ ุงูุนูุฑุ ุงูุฌูุณุ ุงููุญุงูุธุฉ)
5. ุฃููู ุฌููุน ุงูุญููู
6. โ ุชุญูู ูู: ูุชู ุงูุฏุฎูู ุจูุฌุงุญ ูุธููุฑ HubScreen

**ุงููุชุงุฆุฌ ุงููุชููุนุฉ:**
- โ ูุทูุจ ุฌููุน ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ
- โ ุงููููุฉ ุงูููููุฉ ุชุจุฏุฃ ูู 0/2

---

## โ ุงููุฑุญูุฉ 2: ุงุฎุชุจุงุฑ ูุฑุญูุฉ ูุงุญุฏุฉ - Player Perspective

### ุงูุฎุทูุงุช:
1. ูู HubScreenุ ุงุถุบุท ุนูู "ุงููุตูู"
2. ุงุฎุชุฑ "ุงููุตู 1"
3. ุงุถุบุท ุนูู "ุงููุฑุญูุฉ 1" (ุงูุฏููู)
4. ุฃุฌุจ ุนูู ุฌููุน ุงูุฃุณุฆูุฉ ุตุญูุญ (ููุญุตูู ุนูู 3 ูุฌูู)
5. โ ุชุญูู ูู:
   - ุงููุชุงุฆุฌ ุชุธูุฑ ุจุดูู ุตุญูุญ
   - ุนุฏุฏ ุงููุฌูู = 3 (ุฅุฐุง ูุงูุช ุงูุฅุฌุงุจุงุช 100% ุตุญูุญุฉ)
   - ุฒุฑ "ุงููุตู ุงูุชุงูู ๐" ููุฌูุฏ (ูุฃู ุงููุตู < 8)

**ุงููุชุงุฆุฌ ุงููุชููุนุฉ:**
- โ ุงููุฌูู ูุญููุธุฉ ุจุดูู ุตุญูุญ
- โ ุงููููุฉ ุงูููููุฉ = 1/2
- โ XP ูุญูุฏูุซ (50-150 ุญุณุจ ุงูุฏูุฉ)

### ุงูุชุญูู ูู Supabase:
```sql
-- ุชุญูู ูู ุฌุฏูู stage_progress
SELECT * FROM stage_progress 
WHERE user_id = [user_id] 
AND subject = 'english' 
AND chapter = 1 
AND stage = 1;
-- ูุฌุจ ุฃู ุชุธูุฑ: stars = 3 (ุฃู ุฃูู ุญุณุจ ุงูุฃุฏุงุก)

-- ุชุญูู ูู ุฌุฏูู game_sessions
SELECT * FROM game_sessions 
WHERE user_email = [email] 
AND chapter = 1 
AND stage = 1;
-- ูุฌุจ ุฃู ุชุธูุฑ: accuracy, questions_correct, questions_wrong
```

---

## โ ุงููุฑุญูุฉ 3: ุงุฎุชุจุงุฑ ุงููุฑุญูุฉ ุงูุซุงููุฉ

### ุงูุฎุทูุงุช:
1. ูู ุงููุชุงุฆุฌุ ุงุถุบุท "ุงูุนูุฏุฉ" ุจุฏูุงู ูู "ุงููุตู ุงูุชุงูู"
2. ุงูุขู ุงููุฑุญูุฉ 2 ูุฌุจ ุฃู ุชููู ููุชูุญุฉ (ูุฃู ุงููุฑุญูุฉ 1 ุงูุชููุช)
3. ุงุถุบุท ุนูู "ุงููุฑุญูุฉ 2"
4. ุฃููู ุงููุนุจุฉ
5. โ ุชุญูู ูู: ุงููููุฉ ุงูููููุฉ = 2/2

**ุงููุชุงุฆุฌ ุงููุชููุนุฉ:**
- โ ุงููุฑุญูุฉ 2 ููุชูุญุฉ ุจุนุฏ ุฅููุงู ุงููุฑุญูุฉ 1
- โ ุงููููุฉ ุงูููููุฉ = 2/2
- โ ูุธูุฑ "ุฃุญุณูุช! 2/2" ูู ูุงุฆูุฉ ุงูููุงู

---

## โ ุงููุฑุญูุฉ 4: ุงุฎุชุจุงุฑ Supabase Data

### ุงูุจูุงูุงุช ุงููุชููุนุฉ ูุญููุธุฉ:

**1. ุฌุฏูู `users`:**
```
- english_xp: > 0 (ูู ุงููุฑุงุญู)
- biology_xp: 0 (ูู ุชูุนุจ)
- english_questions_answered: > 0
- biology_questions_answered: 0
```

**2. ุฌุฏูู `stage_progress`:**
```
- ch1, s1: 3 stars (ุฃู ุฃูู)
- ch1, s2: X stars (ูู ุงููุนุจ ุงูุซุงูู)
```

**3. ุฌุฏูู `game_sessions`:**
```
- user_email: โ ูุญููุธ
- chapter: 1
- stage: 1 ู 2
- accuracy: X%
- questions_correct: X
- questions_wrong: Y
```

---

## โ ุงููุฑุญูุฉ 5: ุงุฎุชุจุงุฑ Dashboard (HubScreen)

### ุงูุจูุงูุงุช ุงููุนุฑูุถุฉ:
1. **XP**: ูุฌุจ ุฃู ูุธูุฑ ุงูุนุฏุฏ (150+ ูุซูุงู)
2. **Questions**: ุนุฏุฏ ุงูุฃุณุฆูุฉ ุงูุชู ุชูุช ุงูุฅุฌุงุจุฉ ุนูููุง
3. **Flame**: 0 (ุฅุฐุง ูู ููู 7 ุฃูุงู ูุชุชุงููุฉ)

### ุงูุงุฎุชุจุงุฑ:
1. ุนุฏ ุฅูู HubScreen
2. โ ุชุญูู ูู:
   - XP ูุธูุฑ ุจุดูู ุตุญูุญ
   - ุนุฏุฏ ุงูุฃุณุฆูุฉ ูุธูุฑ ุจุดูู ุตุญูุญ
   - ุงููุงุฑ (Flame) = 0 ููููู ุงูุฃูู

---

## โ ุงููุฑุญูุฉ 6: ุงุฎุชุจุงุฑ Admin Perspective

### ุงูุฎุทูุงุช:
1. ูู HubScreenุ ุงุถุบุท 7 ูุฑุงุช ุนูู ุตูุฑุฉ ุงููุงุนุจ (ุญุชู ูุธูุฑ Admin)
2. ูู Admin Dashboard:
   - ุชุญูู ูู ุฌููุน game_sessions
   - ุชุญูู ูู ุฅุญุตุงุฆูุงุช ุงููุณุชุฎุฏููู
   - ุชุญูู ูู accuracy rates

### ุงูุจูุงูุงุช ุงููุชููุนุฉ:
- โ ุฌููุน ุงูุฌูุณุงุช ูุญููุธุฉ ูุน ุงูุจูุงูุงุช ุงููุงููุฉ
- โ Email ูุญููุธ ููู ุฌูุณุฉ
- โ Accuracy calculated ุจุดูู ุตุญูุญ

---

## โ ุงููุฑุญูุฉ 7: ุงุฎุชุจุงุฑ Daily Mission Reset

### Supabase Check:
```sql
SELECT * FROM users 
WHERE id = [user_id];
-- ุชุญูู ูู: daily_mission_count (ูุฌุจ ุฃู ูุนูุฏ 0 ุบุฏุงู)
```

---

## ๐ Checklist ุงูููุงุฆู:

- [ ] Google Auth ูุทูุจ ุฌููุน ุงูุจูุงูุงุช (ุฌุฏูุฏ)
- [ ] ุงููููุฉ ุงูููููุฉ ุชุจุฏุฃ ูู 0
- [ ] ูุฑุญูุฉ 1 ุชููู = 1/2
- [ ] ูุฑุญูุฉ 2 ุชููู = 2/2
- [ ] ุงููุฌูู ูุญููุธุฉ ูู Supabase
- [ ] XP ูุญูุฏูุซ ุตุญูุญ
- [ ] Accuracy ูุญุณูุจ ุจุดูู ุตุญูุญ
- [ ] Email ูุญููุธ ูุน ูู ุฌูุณุฉ
- [ ] Dashboard ูุนุฑุถ ุงูุฅุญุตุงุฆูุงุช ุจุดูู ุตุญูุญ
- [ ] Admin ููุฌูุฏ ูุงูุจูุงูุงุช ุตุญูุญุฉ

---

## โ๏ธ ูุดุงูู ูุญุชููุฉ:

1. **ุงููููุฉ ูุง ุชุชุญุฏูุซ**: ุชุญูู ูู `handleGameExit` ููุณุชุฏุนู ุจุดูู ุตุญูุญ
2. **ุงููุฌูู ูุง ุชุธูุฑ**: ุชุญูู ูู `stage_progress` ูู Supabase
3. **XP ูุง ูุชุญุฏูุซ**: ุชุญูู ูู `giveXPForChapter` ููุณุชุฏุนู
4. **Email ูุง ููุญูุธ**: ุชุญูู ูู `saveSessionToSupabase` ูุญูุธ `user_email`

---

## ๐ ุงูุฅุญุตุงุฆูุงุช ุงููุงููุฉ ูููุธุงู:

### ุงููุชุบูุฑุงุช ุงููุฑุงูุจุฉ:
1. `stage_done_${subject}_ch${n}` - ุงููุฑุงุญู ุงูููุชููุฉ
2. `stage_stars_${subject}_ch${n}_s${stageId}` - ุงููุฌูู
3. `player_xp_${subject}` - ุงูููุงุท
4. `player_streak` - ุงูุดุนูุงุช
5. `daily_mission` - ุงููููุฉ ุงูููููุฉ

### ูุฑุงูุจุฉ Browser Console:
```
โ Stage 1-1 saved with 3 stars
โ XP Updated: +150 (Total: 150)
โ Session saved: 12/12 (100%)
```
